<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i t·∫≠p 03 - Countdown Timer</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<nav>
    <a href="index.html">Trang ch·ªß</a>
    <a href="baitap01.html">B√†i t·∫≠p 01</a>
    <a href="baitap02.html">B√†i t·∫≠p 02</a>
    <a href="baitap03.html">B√†i t·∫≠p 03</a>
</nav>

<div class="container">
    <div class="card">
        <h2>‚è≥ Countdown Timer 10 ph√∫t</h2>
        <h1 id="timer">10:00</h1>
        <button onclick="resetTimer()">Reset</button>
    </div>

    <div class="card">
        <h2>üí° Gi·∫£i th√≠ch logic t∆∞ duy</h2>
        <p>
            - D√πng setInterval c·∫≠p nh·∫≠t m·ªói 1 gi√¢y.<br>
            - Khi timer v·ªÅ 0 th√¨ clearInterval ƒë·ªÉ tr√°nh memory leak.<br>
            - D∆∞·ªõi 1 ph√∫t th√¨ th√™m class warning ƒë·ªÉ nh·∫•p nh√°y c·∫£nh b√°o.<br>
            - Khi deploy hosting th√¨ ƒë·ªìng h·ªì ch·∫°y theo th·ªùi gian m√°y client (kh√¥ng ph·∫£i server).
        </p>
    </div>
</div>

<div class="modal" id="modal">
    <div class="modal-content">
        <h2>‚è∞ H·∫øt gi·ªù!</h2>
        <p>B·∫°n ƒë√£ h·∫øt 10 ph√∫t.</p>
        <button onclick="closeModal()">OK</button>
    </div>
</div>

<script>
    let totalSeconds = 10 * 60;
    let interval = null;

    function updateTimer() {
        const timerElement = document.getElementById("timer");

        let minutes = Math.floor(totalSeconds / 60);
        let seconds = totalSeconds % 60;

        timerElement.textContent =
            String(minutes).padStart(2, "0") + ":" + String(seconds).padStart(2, "0");

        if (totalSeconds <= 60) {
            timerElement.classList.add("warning");
        } else {
            timerElement.classList.remove("warning");
        }

        if (totalSeconds <= 0) {
            clearInterval(interval);
            showModal();
            return;
        }

        totalSeconds--;
    }

    function startTimer() {
        if (interval !== null) clearInterval(interval);
        interval = setInterval(updateTimer, 1000);
    }

    function resetTimer() {
        totalSeconds = 10 * 60;
        startTimer();
    }

    function showModal() {
        document.getElementById("modal").style.display = "flex";
    }

    function closeModal() {
        document.getElementById("modal").style.display = "none";
    }

    startTimer();
</script>

</body>
</html>
